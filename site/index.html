
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://lnynhi02.github.io/stream-processing-pipeline-docs/">
      
      
      
        <link rel="next" href="changelog/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>New York City Yellow Trip Stream Processing</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="New York City Yellow Trip Stream Processing" class="md-header__button md-logo" aria-label="New York City Yellow Trip Stream Processing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            New York City Yellow Trip Stream Processing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Documentation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="New York City Yellow Trip Stream Processing" class="md-nav__button md-logo" aria-label="New York City Yellow Trip Stream Processing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    New York City Yellow Trip Stream Processing
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#i-design" class="md-nav__link">
    <span class="md-ellipsis">
      I. Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I. Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-data-source" class="md-nav__link">
    <span class="md-ellipsis">
      1. Data Source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-business-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      2. Business Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-etl-design" class="md-nav__link">
    <span class="md-ellipsis">
      3. ETL Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. ETL Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#etl-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      ETL Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Task Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tech-selection" class="md-nav__link">
    <span class="md-ellipsis">
      Tech Selection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ii-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      II. Deployment
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/lnynhi02/Stream-Processing-Pipeline" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub Repository
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#i-design" class="md-nav__link">
    <span class="md-ellipsis">
      I. Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I. Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-data-source" class="md-nav__link">
    <span class="md-ellipsis">
      1. Data Source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-business-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      2. Business Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-etl-design" class="md-nav__link">
    <span class="md-ellipsis">
      3. ETL Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. ETL Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#etl-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      ETL Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Task Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tech-selection" class="md-nav__link">
    <span class="md-ellipsis">
      Tech Selection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ii-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      II. Deployment
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<div><h1 id="documentation"><strong><em>üìù DOCUMENTATION</em></strong></h1>
<h2 id="i-design">I. Design</h2>
<p><strong>Note</strong>: This is a simulated real-time analysis pipeline, intended purely for experimental and practice purposes.</p>
<h3 id="1-data-source">1. Data Source</h3>
<p>The data is divided into several CSV files and used as follows:</p>
<ul>
<li><code>yellow_tripdata_2024.csv</code>: Contains taxi trips in New York City in 2024</li>
</ul>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VendorID</td>
<td>A code indicating the TPEP provider that provided the record. 1= Creative Mobile Technologies, LLC; 2= VeriFone Inc.</td>
</tr>
<tr>
<td>tpep_pickup_datetime</td>
<td>The date and time when the meter was engaged.</td>
</tr>
<tr>
<td>tpep_dropoff_datetime</td>
<td>The date and time when the meter was disengaged.</td>
</tr>
<tr>
<td>Passenger_count</td>
<td>The number of passengers in the vehicle. This is a driver-entered value.</td>
</tr>
<tr>
<td>Trip_distance</td>
<td>The elapsed trip distance in miles reported by the taximeter.</td>
</tr>
<tr>
<td>PULocationID</td>
<td>TLC Taxi Zone in which the taximeter was engaged.</td>
</tr>
<tr>
<td>DOLocationID</td>
<td>TLC Taxi Zone in which the taximeter was disengaged.</td>
</tr>
<tr>
<td>RateCodeID</td>
<td>The final rate code in effect at the end of the trip.<br>1= Standard rate <br>2= JFK <br>3= Newark <br>4= Nassau or Westchester <br>5= Negotiated fare <br>6= Group ride</td>
</tr>
<tr>
<td>Store_and_fwd_flag</td>
<td>Indicates whether the trip record was held in vehicle memory before sending to the vendor due to no server connection.<br>Y = Store and forward trip <br>N = Not a store and forward trip</td>
</tr>
<tr>
<td>Payment_type</td>
<td>A numeric code signifying how the passenger paid for the trip.<br>1= Credit card <br>2= Cash <br>3= No charge <br>4= Dispute <br>5= Unknown <br>6= Voided trip</td>
</tr>
<tr>
<td>Fare_amount</td>
<td>The time-and-distance fare calculated by the meter.</td>
</tr>
<tr>
<td>Extra</td>
<td>Miscellaneous extras and surcharges, including $0.50 and $1 rush hour and overnight charges.</td>
</tr>
<tr>
<td>MTA_tax</td>
<td>$0.50 MTA tax automatically triggered based on the metered rate in use.</td>
</tr>
<tr>
<td>Improvement_surcharge</td>
<td>$0.30 improvement surcharge assessed at flag drop. This began in 2015.</td>
</tr>
<tr>
<td>Tip_amount</td>
<td>Tip amount. Automatically populated for credit card tips; cash tips are not included.</td>
</tr>
<tr>
<td>Tolls_amount</td>
<td>Total amount of all tolls paid in trip.</td>
</tr>
<tr>
<td>Total_amount</td>
<td>The total amount charged to passengers. Does not include cash tips.</td>
</tr>
<tr>
<td>Congestion_Surcharge</td>
<td>Total amount collected in trip for NYS congestion surcharge.</td>
</tr>
<tr>
<td>Airport_fee</td>
<td>$1.25 for pick up only at LaGuardia and John F. Kennedy Airports.</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><code>taxi_zone_lookup.csv</code>: A list of boroughs and zones</p>
<ul>
<li>LocationID: A unique identifier for each location.</li>
<li>Borough: The borough in New York City where the location belongs (e.g., Manhattan, Brooklyn, etc.)</li>
<li>Zone: The specific zone within the borough.</li>
</ul>
</li>
</ul>
<h3 id="2-business-requirements">2. Business Requirements</h3>
<ol>
<li>
<p>Real-time analysis: Analyze trip data in real-time to monitor trends and insights.</p>
<ul>
<li>Detect trips with abnormal fees and durations.</li>
<li>Track the number of trips and the distribution of trips by borough in real-time.</li>
<li>Identify the most preferred payment methods and calculate the average revenue per hour.</li>
</ul>
</li>
<li>
<p>Weekly Analysis: Generate comprehensive reports to uncover patterns and support strategic decisions.</p>
<ul>
<li>Store complete data for batch processing and deeper analysis.</li>
<li>Compare trends across different weekdays to identify behavior patterns.</li>
<li>Analyze weekly performance metrics such as total revenue, trip volume, and preferred payment types.</li>
</ul>
</li>
</ol>
<h3 id="3-etl-design">3. ETL Design</h3>
<h4 id="etl-diagram">ETL Diagram</h4>
<p><img alt="Image" src="img/etl-diagram.png"></p>
<h4 id="task-flow">Task Flow</h4>
<p><img alt="Image" src="img/task-flow.png"></p>
<h4 id="tech-selection">Tech Selection</h4>
<p><img alt="Image" src="img/pipeline-1.gif"></p>
<ul>
<li><code>Kafka</code>: Kafka: A distributed event streaming platform designed to handle real-time data and support high-throughput, parallel processing.</li>
<li><code>Spark</code>: A distributed data processing engine that works seamlessly with Kafka. With <strong>Spark Structured Streaming</strong>, it enables near real-time data processing and real-time analytics. Spark is highly scalable and capable of handling large-scale data workloads.</li>
<li><code>PostgreSQL</code>: While not the best choice for handling large-scale or high-frequency real-time data due to its limitations in continuous writing and scalability, it's used in this experimental project for simplicity. Additionally, PostgreSQL integrates well with Power BI, which is used here for visualization.</li>
<li><code>PowerBI</code>: Used to build dashboards and visualize insights. It easily connects to PostgreSQL, making it convenient to create daily or weekly reports with minimal setup.</li>
</ul>
<h2 id="ii-deployment">II. <a href="deployment/">Deployment</a></h2></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.expand", "navigation.sections", "navigation.top", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>